{"remainingRequest":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\src\\components\\login\\Login.vue?vue&type=style&index=0&id=08b4fdc3&scoped=true&lang=less&","dependencies":[{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\src\\components\\login\\Login.vue","mtime":1586499934724},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5sb2dpbl9jb250YWluZXJ7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsLjIpOw0KICBoZWlnaHQ6IDEwMCU7DQoNCiAgIC5sb2dpbl9wYW5lbHsNCiAgICAgIHdpZHRoOiA0MDBweDsNCiAgICAgIGhlaWdodDogNDYwcHg7DQogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhOw0KICAgICAgYm9yZGVyLXJhZGl1czogMTZweDsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIG92ZXJmbG93OiBoaWRkZW47DQogICAgICB0b3A6IDUwJTsNCiAgICAgIGxlZnQ6IDUwJTsNCiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7DQoNCiAgICAgIC5sb2dpbl9oZWFkZXJ7DQogICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgIGxpbmUtaGVpZ2h0OiAzMnB4Ow0KICAgICAgICAgY29sb3I6ICMzOTNiM2Q7DQogICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICAgbWFyZ2luLWJvdHRvbTogMzJweDsNCiAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgIH0NCg0KICAgICAgLmxvZ2luX2F2YXRhcnsNCiAgICAgICAgIHdpZHRoOiA2MHB4Ow0KICAgICAgICAgaGVpZ2h0OiA2MHB4Ow0KICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlOw0KICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogb3JhbmdlOw0KICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOw0KDQogICAgICAgICBzdmd7DQogICAgICAgICAgICB3aWR0aDogNDhweDsNCiAgICAgICAgICAgIGhlaWdodDogNDhweDsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgIHRvcDogNTAlOw0KICAgICAgICAgICAgbGVmdDogNTAlOw0KICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsNCiAgICAgICAgIH0NCiAgICAgIH0NCg0KICAgICAgLmxvZ2luX2Zvcm17DQogICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gNDBweCk7DQogICAgICAgICBoZWlnaHQ6IDMwMHB4Ow0KICAgICAgICAgcGFkZGluZzogMCAyMHB4Ow0KICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEyMHB4KTsNCg0KICAgICAgICAgLmZvcmdldF9saW5rew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZW5kOw0KICAgICAgICAgfQ0KDQogICAgICAgICAuYnV0dG9uc3sNCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsNCiAgICAgICAgIH0NCiAgICAgIH0NCiAgIH0NCn0NCg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/components/login","sourcesContent":["<!--\r\n       Filename: Login.vue\r\n    Description: 登录组件\r\n        Version: 1.0\r\n        Created: 2020-04-01 23:20 星期三\r\n       Revision: none\r\n       Compiler: none\r\n         Author: DreamSnow·Draco\r\n        Company: none\r\n-->\r\n<template>\r\n    <div class=\"login_container\">\r\n       <!-- 登录面板 -->\r\n      <div class=\"login_panel\">\r\n         <!-- 登录标题 -->\r\n        <div class=\"login_header\"><h1>高校学生宿舍管理系统</h1></div>\r\n         <!-- 登录默认头像 -->\r\n        <div class=\"login_avatar\">\r\n          <svg t=\"1585744841236\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1328\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\">\r\n            <path\r\n              d=\"M848.64 929.57h-667.2c-34.33 0-61.39-30.58-55.83-64.45 30.77-187.31 193.41-330.21 389.43-330.21s358.66 142.9 389.43 330.21c5.56 33.87-21.5 64.45-55.83 64.45z\" fill=\"#ffffff\" p-id=\"1329\"/>\r\n            <path d=\"M515.04 287.1m-214.72 0a214.72 214.72 0 1 0 429.44 0 214.72 214.72 0 1 0-429.44 0Z\"\r\n                  fill=\"#ffffff\" p-id=\"1330\"/>\r\n            <path\r\n              d=\"M377.49 317.07c-10.53 0-19.36-8.23-19.96-18.87-2.23-38.99 10.86-76.52 36.85-105.66s61.78-46.43 100.77-48.66c11.05-0.63 20.49 7.8 21.13 18.84 0.63 11.04-7.8 20.49-18.84 21.13-28.32 1.62-54.31 14.17-73.18 35.34-18.88 21.17-28.38 48.42-26.76 76.73 0.63 11.04-7.8 20.49-18.84 21.13-0.4 0.01-0.79 0.02-1.17 0.02z\" fill=\"#ffffff\" p-id=\"1331\"/>\r\n          </svg>\r\n        </div>\r\n         <!-- 登录表单 -->\r\n         <div class=\"login_form\">\r\n            <el-form label-width=\"0px\" :model=\"loginForm\" :rules=\"loginFormRules\" status-icon ref=\"loginFormRef\">\r\n               <!-- 用户名输入框 -->\r\n               <el-form-item prop=\"userId\">\r\n                  <el-input type=\"text\" prefix-icon=\"el-icon-user\" placeholder=\"学号 / 职工号\" v-model.trim.lazy=\"loginForm.userId\"></el-input>\r\n                  <!-- 用户名验证信息 -->\r\n               </el-form-item>\r\n               <!-- 用户密码输入框 -->\r\n               <el-form-item prop=\"userWord\">\r\n                  <el-input type=\"password\" prefix-icon=\"el-icon-lock\" placeholder=\"密码\" v-model.trim.lazy=\"loginForm.userWord\"></el-input>\r\n                  <!-- 密码验证信息 -->\r\n               </el-form-item>\r\n               <!-- 忘记密码链接 -->\r\n               <el-form-item class=\"forget_link\">\r\n                  <el-link type=\"info\">忘记密码</el-link>\r\n               </el-form-item>\r\n               <!-- 登录按钮 -->\r\n               <el-form-item class=\"buttons\">\r\n                  <el-button type=\"primary\" round @click=\"loginButton\">登录</el-button>\r\n               </el-form-item>\r\n            </el-form>\r\n         </div>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'Login',\r\n       data () {\r\n          const validatePass = (rule, value, callback) => {\r\n             if (value === '') {\r\n                callback(new Error('请输入密码！'));\r\n             } else {\r\n                if (value.length < 8 || value.length > 16) {\r\n                   callback(new Error('密码长度在 8 到 16 个字符！'));\r\n                } else if (!/(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[^a-zA-Z0-9]).{8,16}/.test(value)) {\r\n                   callback(new Error('密码必须包含大小写字母、数字、特殊字符！'));\r\n                }\r\n                callback();\r\n             }\r\n          };\r\n           return {\r\n              loginForm: {\r\n                 userId: '',\r\n                 userWord: '',\r\n              },\r\n              loginFormRules: {\r\n                 userId: [\r\n                    { required: true, message: '请输入学号/职工号！', trigger: 'blur' },\r\n                    { min: 8, max: 10, message: '学号/职工号长度在 8 到 10 个字符！', trigger: 'blur' },\r\n                 ],\r\n                 userWord: [\r\n                    { validator: validatePass, trigger: 'blur' },\r\n                 ]\r\n              }\r\n           }\r\n       },\r\n       methods: {\r\n           clearLoginForm () {\r\n              this.$refs.loginFormRef.restFileds();\r\n           },\r\n          loginButton () {\r\n              this.$refs.loginFormRef.validate (async valid => {\r\n                 // console.log(valid); 表达规则检验是否通过 valid 是一个boolean值\r\n                 // console.log(this.loginForm);\r\n                 if (!valid) return;\r\n                 /*this.$http({\r\n                    method: 'post',\r\n                    url: '/login',\r\n                    data: this.loginForm\r\n                 }).then(res => {\r\n                    console.log(res);\r\n                 });*/\r\n                 const { data: res } = await this.$http.post('/login', this.loginForm);\r\n                 console.log(res);\r\n                 if (res.state !== 200) {\r\n                    return /*this.$message.error('登录失败！')*/this.$alert(res.message, '警告', {\r\n                       confirmButtonText: '确定',\r\n                       callback: action => {\r\n                          this.$message({\r\n                             type: 'info',\r\n                             message: `action: ${action}`\r\n                          })\r\n                       }\r\n                    });\r\n                    // eslint-disable-next-line brace-style\r\n                 }\r\n                 /*this.$message.success('登录成功！');*/\r\n                 else {\r\n                    /*this.$alert(res.info, '正常', {\r\n                       confirmButtonText: '确定',\r\n                       callback: action => {\r\n                          this.$message({\r\n                             type: 'info',\r\n                             message: `action: ${action}`\r\n                          })\r\n                       }\r\n                    });*/\r\n                    // 1. 将登录之后的 token 保存到客户端的 sessionStorage 中\r\n                    // 1.1 项目中除了登录的其他 API 接口,只有在登陆之后才能访问\r\n                    // 1.2 token 只有在当前网站打开生效,所以将 token 保存在sessionStorage 中\r\n                    window.sessionStorage.setItem('token', res.data.token);\r\n                    // 2. 通过编程式导航跳转到后台页面\r\n                    await this.$router.push('/home');\r\n                 }\r\n              });\r\n          }\r\n       }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.login_container{\r\n  background-color: rgba(0,0,0,.2);\r\n  height: 100%;\r\n\r\n   .login_panel{\r\n      width: 400px;\r\n      height: 460px;\r\n      background-color: #fafafa;\r\n      border-radius: 16px;\r\n      position: absolute;\r\n      overflow: hidden;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%,-50%);\r\n\r\n      .login_header{\r\n         width: 100%;\r\n         line-height: 32px;\r\n         color: #393b3d;\r\n         font-weight: normal;\r\n         text-align: center;\r\n         margin-bottom: 32px;\r\n         position: relative;\r\n      }\r\n\r\n      .login_avatar{\r\n         width: 60px;\r\n         height: 60px;\r\n         border-radius: 50%;\r\n         background-color: orange;\r\n         position: absolute;\r\n         left: 50%;\r\n         transform: translateX(-50%);\r\n\r\n         svg{\r\n            width: 48px;\r\n            height: 48px;\r\n            position: absolute;\r\n            top: 50%;\r\n            left: 50%;\r\n            transform: translate(-50%,-50%);\r\n         }\r\n      }\r\n\r\n      .login_form{\r\n         width: calc(100% - 40px);\r\n         height: 300px;\r\n         padding: 0 20px;\r\n         transform: translateY(120px);\r\n\r\n         .forget_link{\r\n            display: flex;\r\n            justify-content: end;\r\n         }\r\n\r\n         .buttons{\r\n            display: flex;\r\n            justify-content: center;\r\n         }\r\n      }\r\n   }\r\n}\r\n</style>\r\n"]}]}