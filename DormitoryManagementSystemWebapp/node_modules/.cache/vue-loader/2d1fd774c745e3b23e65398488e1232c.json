{"remainingRequest":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\src\\views\\user-info\\UserInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\src\\views\\user-info\\UserInfo.vue","mtime":1588851137498},{"path":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WorkSpace\\02_Project\\DormitoryManagementSystem\\DormitoryManagementWebapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgbmFtZTogJ1VzZXJJbmZvJywKICAgZGF0YSAoKSB7CiAgICAgIC8vIOagoemqjOaJi+acuuWPt+aYr+WQpuWQiOazlQogICAgICBjb25zdCB2YWxpZGF0ZVBhc3NUZWwgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgIC8vIOepuuWAvOagoemqjAogICAgICAgICBpZiAodmFsdWUgPT09ICcnKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign6K+36L6T5YWl5omL5py65Y+377yBJykpOwogICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpZiAoIS9eMSgzfDR8NXw2fDd8OHw5KVxkezl9JC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfmiYvmnLrlj7fkuI3lkIjms5UnKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgfQogICAgICB9OwogICAgICAvLyDmoKHpqozpgq7nrrHmmK/lkKblkIjms5UKICAgICAgY29uc3QgdmFsaWRhdGVQYXNzTWFpbCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgICAgLy8g56m65YC85qCh6aqMCiAgICAgICAgIGlmICh2YWx1ZSA9PT0gJycpIHsKICAgICAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCfor7fovpPlhaXpgq7nrrHvvIEnKSk7CiAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOavlOi+g+WJjeS4gOasoei+k+WFpeeahOWvhueggQogICAgICAgICAgICBpZiAoIS9eKFthLXpBLVowLTlfLV0pK0AoW2EtekEtWjAtOV8tXSkrKFwuW2EtekEtWjAtOV8tXSkrLy50ZXN0KHZhbHVlKSkgewogICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ+mCrueuseS4jeWQiOazlScpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICB9CiAgICAgIH07CiAgICAgIHJldHVybiB7CiAgICAgICAgIHVzZXJJbmZvOiB7CiAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICAgIHRlbDogJycsCiAgICAgICAgICAgIG1haWw6ICcnLAogICAgICAgICAgICBsYXN0VGltZTogJycsCiAgICAgICAgICAgIGNvbGxlZ2U6ICcnLAogICAgICAgICAgICBjbGFzczogJycsCiAgICAgICAgICAgIGRvcjogJycsCiAgICAgICAgIH0sCiAgICAgICAgIHVzZXJJbmZvUnVsZXM6IHsKICAgICAgICAgICAgbmFtZTogWwogICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5aeT5ZCN77yBJywKICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgdGVsOiBbCiAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlp5PlkI3vvIEnLAogICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB2YWxpZGF0b3I6IHZhbGlkYXRlUGFzc1RlbCwKICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKICAgICAgICAgICAgbWFpbDogWwogICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5aeT5ZCN77yBJywKICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3NNYWlsLAogICAgICAgICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdLAogICAgICAgICB9CiAgICAgIH07CiAgIH0sCiAgIGNyZWF0ZWQgKCkgewogICAgICB0aGlzLmdldFVzZXJJbmZvKCk7CiAgIH0sCiAgIG1ldGhvZHM6IHsKICAgICAgYXN5bmMgZ2V0VXNlckluZm8gKCkgewogICAgICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJy9jdHJsL3VzZXJJbmZvL3NlbGVjdCcpOwogICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLnVzZXJJbmZvID0gcmVzLmRhdGE7CiAgICAgICAgIH0KICAgICAgfSwKICAgICAgYXN5bmMgYWx0ZXJVc2VySW5mbyAoKSB7CiAgICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJy9jdHJsL3VzZXJJbmZvL3VwZGF0ZScsIHsKICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMudXNlckluZm8ubmFtZSwKICAgICAgICAgICAgdXNlclRlbDogdGhpcy51c2VySW5mby50ZWwsCiAgICAgICAgICAgIHVzZXJNYWlsOiB0aGlzLnVzZXJJbmZvLm1haWwKICAgICAgICAgfSk7CiAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0VXNlckluZm8oKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGFsZXJ0KCfkv67mlLnmiJDlip8nLCAn5o+Q56S6JywgewogICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgYWN0aW9uOiAke2FjdGlvbn1gCiAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgIH0KICAgICAgfQogICB9Cn0K"},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/views/user-info","sourcesContent":["<!--\r\n    Description: 个人信息组件\r\n        Created: 2020-04-13 23:33 星期一\r\n         Author: DreamSnow·Draco\r\n        Company: none\r\n-->\r\n<template>\r\n   <div class=\"user-info\">\r\n      <el-form ref=\"userInfoRef\" :rules=\"userInfoRules\" :model=\"userInfo\" label-width=\"82px\">\r\n         <el-form-item label=\"学号：\">\r\n            <el-input v-model=\"userInfo.id\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"姓名：\" prop=\"name\">\r\n            <el-input type=\"text\" placeholder=\"姓名\" v-model.trim.lazy=\"userInfo.name\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"手机号：\" prop=\"tel\">\r\n            <el-input type=\"text\" placeholder=\"手机号\" v-model.trim.lazy=\"userInfo.tel\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"邮箱：\" prop=\"mail\">\r\n            <el-input type=\"text\" placeholder=\"邮箱\" v-model.trim.lazy=\"userInfo.mail\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"上次登录：\">\r\n            <el-input v-model=\"userInfo.lastTime\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"学院：\">\r\n            <el-input v-model=\"userInfo.college\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"班级：\">\r\n            <el-input v-model=\"userInfo.class\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"宿舍号：\">\r\n            <el-input v-model=\"userInfo.dor\" disabled></el-input>\r\n         </el-form-item>\r\n      </el-form>\r\n      <div class=\"buttonGroup\">\r\n         <el-button type=\"primary\" round @click=\"alterUserInfo\">提交修改</el-button>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\n   export default {\r\n      name: 'UserInfo',\r\n      data () {\r\n         // 校验手机号是否合法\r\n         const validatePassTel = (rule, value, callback) => {\r\n            // 空值校验\r\n            if (value === '') {\r\n               callback(new Error('请输入手机号！'));\r\n            } else {\r\n               if (!/^1(3|4|5|6|7|8|9)\\d{9}$/.test(value)) {\r\n                  callback(new Error('手机号不合法'));\r\n               }\r\n               callback();\r\n            }\r\n         };\r\n         // 校验邮箱是否合法\r\n         const validatePassMail = (rule, value, callback) => {\r\n            // 空值校验\r\n            if (value === '') {\r\n               callback(new Error('请输入邮箱！'));\r\n            } else {\r\n               // 比较前一次输入的密码\r\n               if (!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/.test(value)) {\r\n                  callback(new Error('邮箱不合法'));\r\n               }\r\n               callback();\r\n            }\r\n         };\r\n         return {\r\n            userInfo: {\r\n               id: '',\r\n               name: '',\r\n               tel: '',\r\n               mail: '',\r\n               lastTime: '',\r\n               college: '',\r\n               class: '',\r\n               dor: '',\r\n            },\r\n            userInfoRules: {\r\n               name: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n               tel: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  },\r\n                  {\r\n                     validator: validatePassTel,\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n               mail: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  },\r\n                  {\r\n                     validator: validatePassMail,\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n            }\r\n         };\r\n      },\r\n      created () {\r\n         this.getUserInfo();\r\n      },\r\n      methods: {\r\n         async getUserInfo () {\r\n            const { data: res } = await this.$http.get('/ctrl/userInfo/select');\r\n            if (res.code === 200) {\r\n               this.userInfo = res.data;\r\n            }\r\n         },\r\n         async alterUserInfo () {\r\n            const { data: res } = await this.$http.post('/ctrl/userInfo/update', {\r\n               userName: this.userInfo.name,\r\n               userTel: this.userInfo.tel,\r\n               userMail: this.userInfo.mail\r\n            });\r\n            if (res.code === 200) {\r\n               this.getUserInfo();\r\n               return this.$alert('修改成功', '提示', {\r\n                  confirmButtonText: '确定',\r\n                  callback: action => {\r\n                     this.$message({\r\n                        type: 'info',\r\n                        message: `action: ${action}`\r\n                     })\r\n                  }\r\n               });\r\n            }\r\n         }\r\n      }\r\n   }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n   .user-info {\r\n      width: 100%;\r\n      overflow-x: hidden;\r\n      overflow-y: auto;\r\n      display: flex;\r\n      justify-content: center;\r\n      background-color: #fafafa;\r\n      border-radius: 5px;\r\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n      padding: 20px 50px;\r\n      box-sizing: border-box;\r\n      flex-direction: column;\r\n\r\n      .el-form {\r\n         width: 100%;\r\n      }\r\n\r\n      .buttonGroup {\r\n         text-align: center;\r\n      }\r\n   }\r\n</style>\r\n"]}]}