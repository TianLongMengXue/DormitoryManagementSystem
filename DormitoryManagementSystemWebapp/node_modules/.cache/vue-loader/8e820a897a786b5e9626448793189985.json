{"remainingRequest":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\src\\views\\user-info\\UserInfo.vue?vue&type=style&index=0&id=b1abdedc&scoped=true&lang=less&","dependencies":[{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\src\\views\\user-info\\UserInfo.vue","mtime":1588851137498},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\WorkSpace\\02_Project\\Programmming\\DormitoryManagementSystem\\webapp\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLnVzZXItaW5mbyB7CiAgIHdpZHRoOiAxMDAlOwogICBvdmVyZmxvdy14OiBoaWRkZW47CiAgIG92ZXJmbG93LXk6IGF1dG87CiAgIGRpc3BsYXk6IGZsZXg7CiAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmFmYWZhOwogICBib3JkZXItcmFkaXVzOiA1cHg7CiAgIGJveC1zaGFkb3c6IDAgMXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuMik7CiAgIHBhZGRpbmc6IDIwcHggNTBweDsKICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKCiAgIC5lbC1mb3JtIHsKICAgICAgd2lkdGg6IDEwMCU7CiAgIH0KCiAgIC5idXR0b25Hcm91cCB7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgfQp9Cg=="},{"version":3,"sources":["UserInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"UserInfo.vue","sourceRoot":"src/views/user-info","sourcesContent":["<!--\r\n    Description: 个人信息组件\r\n        Created: 2020-04-13 23:33 星期一\r\n         Author: DreamSnow·Draco\r\n        Company: none\r\n-->\r\n<template>\r\n   <div class=\"user-info\">\r\n      <el-form ref=\"userInfoRef\" :rules=\"userInfoRules\" :model=\"userInfo\" label-width=\"82px\">\r\n         <el-form-item label=\"学号：\">\r\n            <el-input v-model=\"userInfo.id\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"姓名：\" prop=\"name\">\r\n            <el-input type=\"text\" placeholder=\"姓名\" v-model.trim.lazy=\"userInfo.name\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"手机号：\" prop=\"tel\">\r\n            <el-input type=\"text\" placeholder=\"手机号\" v-model.trim.lazy=\"userInfo.tel\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"邮箱：\" prop=\"mail\">\r\n            <el-input type=\"text\" placeholder=\"邮箱\" v-model.trim.lazy=\"userInfo.mail\"></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"上次登录：\">\r\n            <el-input v-model=\"userInfo.lastTime\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"学院：\">\r\n            <el-input v-model=\"userInfo.college\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"班级：\">\r\n            <el-input v-model=\"userInfo.class\" disabled></el-input>\r\n         </el-form-item>\r\n         <el-form-item label=\"宿舍号：\">\r\n            <el-input v-model=\"userInfo.dor\" disabled></el-input>\r\n         </el-form-item>\r\n      </el-form>\r\n      <div class=\"buttonGroup\">\r\n         <el-button type=\"primary\" round @click=\"alterUserInfo\">提交修改</el-button>\r\n      </div>\r\n   </div>\r\n</template>\r\n\r\n<script>\r\n   export default {\r\n      name: 'UserInfo',\r\n      data () {\r\n         // 校验手机号是否合法\r\n         const validatePassTel = (rule, value, callback) => {\r\n            // 空值校验\r\n            if (value === '') {\r\n               callback(new Error('请输入手机号！'));\r\n            } else {\r\n               if (!/^1(3|4|5|6|7|8|9)\\d{9}$/.test(value)) {\r\n                  callback(new Error('手机号不合法'));\r\n               }\r\n               callback();\r\n            }\r\n         };\r\n         // 校验邮箱是否合法\r\n         const validatePassMail = (rule, value, callback) => {\r\n            // 空值校验\r\n            if (value === '') {\r\n               callback(new Error('请输入邮箱！'));\r\n            } else {\r\n               // 比较前一次输入的密码\r\n               if (!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\\.[a-zA-Z0-9_-])+/.test(value)) {\r\n                  callback(new Error('邮箱不合法'));\r\n               }\r\n               callback();\r\n            }\r\n         };\r\n         return {\r\n            userInfo: {\r\n               id: '',\r\n               name: '',\r\n               tel: '',\r\n               mail: '',\r\n               lastTime: '',\r\n               college: '',\r\n               class: '',\r\n               dor: '',\r\n            },\r\n            userInfoRules: {\r\n               name: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n               tel: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  },\r\n                  {\r\n                     validator: validatePassTel,\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n               mail: [\r\n                  {\r\n                     required: true,\r\n                     message: '请输入姓名！',\r\n                     trigger: 'blur'\r\n                  },\r\n                  {\r\n                     validator: validatePassMail,\r\n                     trigger: 'blur'\r\n                  }\r\n               ],\r\n            }\r\n         };\r\n      },\r\n      created () {\r\n         this.getUserInfo();\r\n      },\r\n      methods: {\r\n         async getUserInfo () {\r\n            const { data: res } = await this.$http.get('/ctrl/userInfo/select');\r\n            if (res.code === 200) {\r\n               this.userInfo = res.data;\r\n            }\r\n         },\r\n         async alterUserInfo () {\r\n            const { data: res } = await this.$http.post('/ctrl/userInfo/update', {\r\n               userName: this.userInfo.name,\r\n               userTel: this.userInfo.tel,\r\n               userMail: this.userInfo.mail\r\n            });\r\n            if (res.code === 200) {\r\n               this.getUserInfo();\r\n               return this.$alert('修改成功', '提示', {\r\n                  confirmButtonText: '确定',\r\n                  callback: action => {\r\n                     this.$message({\r\n                        type: 'info',\r\n                        message: `action: ${action}`\r\n                     })\r\n                  }\r\n               });\r\n            }\r\n         }\r\n      }\r\n   }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n   .user-info {\r\n      width: 100%;\r\n      overflow-x: hidden;\r\n      overflow-y: auto;\r\n      display: flex;\r\n      justify-content: center;\r\n      background-color: #fafafa;\r\n      border-radius: 5px;\r\n      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\r\n      padding: 20px 50px;\r\n      box-sizing: border-box;\r\n      flex-direction: column;\r\n\r\n      .el-form {\r\n         width: 100%;\r\n      }\r\n\r\n      .buttonGroup {\r\n         text-align: center;\r\n      }\r\n   }\r\n</style>\r\n"]}]}